<!DOCTYPE html>
<html lang="en">
<head>
    <title><%= @general_setting.application_name %> - Two-Factor Authentication</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.css" rel="stylesheet" />
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <link rel="icon" href="https://pub-8fd83a2723de4458a5abcafe7bce787c.r2.dev/0243739db60808f462f9.ico" type="image/x-icon">
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
<div class="flex min-h-screen h-screen">
  <div class="hidden md:flex w-3/4 bg-gradient-to-br from-indigo-900 via-purple-900 to-black items-center justify-center relative overflow-hidden">
    <div class="absolute inset-0">
      <div id="particles-js" class="absolute inset-0 opacity-30"></div>
      <div class="absolute inset-0">
        <div class="absolute w-96 h-96 -top-48 -left-48 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
        <div class="absolute w-96 h-96 -bottom-48 -right-48 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"></div>
        <div class="absolute w-96 h-96 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"></div>
      </div>
    </div>

    <div class="relative perspective-1000 z-10 w-[500px]">
      <div class="transform-3d hover:rotate-y-12 transition-transform duration-200 cursor-pointer">
        <div class="bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl rounded-2xl p-8 border border-white/10 shadow-2xl">
          <div class="flex items-center space-x-2 mb-8">
            <div class="w-3 h-3 bg-red-500/80 rounded-full"></div>
            <div class="w-3 h-3 bg-yellow-500/80 rounded-full"></div>
            <div class="w-3 h-3 bg-green-500/80 rounded-full"></div>
          </div>
          
          <div class="h-64 bg-gradient-to-r from-indigo-500/20 to-purple-500/20 rounded-xl flex items-center justify-center">
            <i class='bx bx-shield-quarter text-white/50 text-8xl animate-pulse'></i>
          </div>

          <div class="mt-8 space-y-4">
            <div class="h-2 bg-white/10 rounded-full w-3/4 animate-pulse"></div>
            <div class="h-2 bg-white/10 rounded-full animate-pulse delay-100"></div>
            <div class="h-2 bg-white/10 rounded-full w-1/2 animate-pulse delay-200"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="w-full md:w-1/2 flex flex-col justify-center px-4 py-12 sm:px-6 lg:px-20 xl:px-24 bg-white dark:bg-zinc-900">
    <div class="mx-auto max-w-md w-full">
      <div class="text-center mb-10 animate-fadeIn">
        <div class="w-20 h-20 mx-auto mb-4 bg-purple-600 rounded-xl flex items-center justify-center p-3">
          <img class="h-16 w-auto" src="https://pub-8fd83a2723de4458a5abcafe7bce787c.r2.dev/186bfeba4cb3504ec1ee.png" alt="Medaemia Icon">
        </div>
        <h2 class="text-4xl font-extrabold text-gray-900 dark:text-white">Two-Factor Authentication</h2>
        <p class="mt-2 text-lg text-gray-600 dark:text-gray-400">Enter the code from your authenticator app</p>
      </div>

      <div class="bg-white dark:bg-zinc-800 p-8 rounded-2xl shadow-lg border border-gray-200 dark:border-zinc-700 animate-fadeIn">
        <%= form_with url: verify_2fa_login_path, method: :post, local: true, class: "space-y-6" do |form| %>
          <%= form.hidden_field :authenticity_token, value: form_authenticity_token %>
          
          <div class="relative">
            <div class="absolute inset-y-0 left-3 flex items-center pointer-events-none">
              <i class='bx bx-lock-alt text-xl text-gray-400 dark:text-gray-500'></i>
            </div>
            <%= form.text_field :otp_code,
                required: true,
                pattern: "[0-9]{6}",
                inputmode: "numeric", 
                maxlength: "6",
                class: "w-full py-3 pl-10 pr-4 text-center text-2xl font-bold bg-gray-50 dark:bg-zinc-800/50 border-2 border-gray-200 dark:border-zinc-700 rounded-xl focus:border-purple-500 dark:focus:border-purple-500 focus:ring focus:ring-purple-200 dark:focus:ring-purple-500/20 focus:ring-opacity-50 transition-all duration-200 text-gray-900 dark:text-white hover:border-purple-300 dark:hover:border-purple-500/30",
                placeholder: "Enter 6-digit code" %>
          </div>

          <div class="mt-8">
            <%= form.submit "Verify", 
                class: "w-full py-3 px-4 rounded-xl bg-purple-600 hover:bg-purple-700 text-white font-semibold text-lg shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-all duration-200 flex items-center justify-center gap-2" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
  </div>
</div>

<style>
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.animate-fadeIn {
  animation: fadeIn 0.5s ease-out;
}
</style>

<script src="<%= asset_path('particles.js') %>"></script>
<script src="<%= asset_path('particles_config.js') %>"></script>
</body>
</html>
