<div class="min-h-screen bg-gradient-to-br from-zinc-950 via-zinc-900 to-zinc-950">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Header -->
    <div class="mb-8 relative">
      <div class="absolute inset-0 bg-gradient-to-r from-amber-500/10 via-orange-500/10 to-red-500/10 rounded-2xl blur-3xl"></div>
      <div class="relative bg-zinc-900/50 backdrop-blur-sm border border-zinc-800/50 rounded-2xl p-6">
        <div class="flex items-center gap-4">
          <div class="w-14 h-14 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-2xl flex items-center justify-center ring-1 ring-purple-500/30">
            <i class='bx bx-cog text-purple-400 text-3xl'></i>
          </div>
          <div>
            <h1 class="text-3xl md:text-4xl font-bold bg-gradient-to-r from-white via-zinc-100 to-zinc-300 bg-clip-text text-transparent mb-1">
              Admin Settings
            </h1>
            <p class="text-zinc-400">Configure your application settings and preferences</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Flash Messages -->
    <% if flash[:notice] %>
      <div class="mb-6 bg-gradient-to-r from-green-500/10 to-emerald-500/10 border border-green-500/30 rounded-2xl p-4">
        <div class="flex items-center gap-2 text-green-400">
          <i class='bx bx-check-circle text-xl'></i>
          <span><%= flash[:notice] %></span>
        </div>
      </div>
    <% end %>
    
    <% if flash[:alert] %>
      <div class="mb-6 bg-gradient-to-r from-red-500/10 to-rose-500/10 border border-red-500/30 rounded-2xl p-4">
        <div class="flex items-center gap-2 text-red-400">
          <i class='bx bx-error-circle text-xl'></i>
          <span><%= flash[:alert] %></span>
        </div>
      </div>
    <% end %>

    <!-- Settings Grid -->
    <div class="grid grid-cols-1 gap-8">
      
      <!-- General Settings Card -->
      <div class="bg-gradient-to-br from-zinc-900 to-zinc-900/50 border border-zinc-800 rounded-2xl backdrop-blur-sm overflow-hidden">
        <div class="p-6 border-b border-zinc-700/50">
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-xl flex items-center justify-center ring-1 ring-purple-500/30">
              <i class='bx bx-cog text-purple-400 text-xl'></i>
            </div>
            <h3 class="text-xl font-bold text-white">
              General Settings
            </h3>
          </div>
        </div>

        <div class="p-6">
          <%= form_with(model: @general_setting, url: admin_update_settings_path, method: :patch, local: true) do |f| %>
            <div class="space-y-6">
              <!-- Toggle Switches -->
              <div class="space-y-4">
                <div class="flex items-center justify-between p-4 rounded-xl bg-zinc-800/50 border border-zinc-700/50">
                  <div>
                    <h4 class="font-medium text-white">Disable Logins/Registrations</h4>
                    <p class="text-sm text-zinc-400 mt-1">Temporarily disable user access</p>
                  </div>
                  <label class="relative inline-flex items-center cursor-pointer">
                    <%= f.check_box :maintenance_mode, class: "sr-only peer", id: "maintenance_mode_toggle" %>
                    <div class="w-11 h-6 bg-zinc-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-500/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                  </label>
                </div>

                <div class="flex items-center justify-between p-4 rounded-xl bg-zinc-800/50 border border-zinc-700/50">
                  <div>
                    <h4 class="font-medium text-white">Disable Orders</h4>
                    <p class="text-sm text-zinc-400 mt-1">Prevent users from placing new orders</p>
                  </div>
                  <label class="relative inline-flex items-center cursor-pointer">
                    <%= f.check_box :orders_disabled, class: "sr-only peer", id: "orders_disabled_toggle" %>
                    <div class="w-11 h-6 bg-zinc-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-500/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"></div>
                  </label>
                </div>
              </div>

              <!-- Orders Disabled Reason -->
              <div id="orders_disabled_reason_field" class="<%= 'hidden' unless @general_setting.orders_disabled %>">
                <div>
                  <%= f.label :orders_disabled_reason, "Reason for Disabling Orders", class: "block text-sm font-medium text-zinc-400 mb-2" %>
                  <%= f.text_area :orders_disabled_reason, rows: 3, placeholder: "e.g. Temporarily closed for maintenance, Please DM us on social media to place orders", class: "block w-full border border-zinc-700 rounded-xl bg-zinc-800/50 py-3 px-4 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white transition-all" %>
                  <p class="text-xs text-zinc-500 mt-1">This message will be shown to users when they try to checkout</p>
                </div>
              </div>

              <!-- Text Fields -->
              <div class="space-y-4">
                <div>
                  <%= f.label :application_name, "Application Name", class: "block text-sm font-medium text-zinc-400 mb-2" %>
                  <%= f.text_field :application_name, class: "block w-full border border-zinc-700 rounded-xl bg-zinc-800/50 py-3 px-4 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white transition-all" %>
                </div>

                <div>
                  <%= f.label :phone_number, "Phone Number", class: "block text-sm font-medium text-zinc-400 mb-2" %>
                  <%= f.text_field :phone_number, class: "block w-full border border-zinc-700 rounded-xl bg-zinc-800/50 py-3 px-4 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white transition-all" %>
                </div>

                <div>
                  <%= f.label :contact_email, "Contact Email", class: "block text-sm font-medium text-zinc-400 mb-2" %>
                  <%= f.email_field :contact_email, class: "block w-full border border-zinc-700 rounded-xl bg-zinc-800/50 py-3 px-4 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white transition-all" %>
                </div>

                <div>
                  <%= f.label :website_url, "Website URL", class: "block text-sm font-medium text-zinc-400 mb-2" %>
                  <%= f.url_field :website_url, class: "block w-full border border-zinc-700 rounded-xl bg-zinc-800/50 py-3 px-4 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white transition-all" %>
                </div>
              </div>

              <div class="pt-6 border-t border-zinc-800/60 space-y-4">
                <div>
                  <h4 class="text-white font-semibold">Bank Transfer Details</h4>
                  <p class="text-sm text-zinc-400">Displayed to customers after checkout for manual payments.</p>
                </div>
                <div class="grid gap-4 md:grid-cols-2">
                  <div>
                    <%= f.label :bank_account_name, "Account Name", class: "block text-sm font-medium text-zinc-400 mb-2" %>
                    <%= f.text_field :bank_account_name, class: "block w-full border border-zinc-700 rounded-xl bg-zinc-800/50 py-3 px-4 text-white" %>
                  </div>
                  <div>
                    <%= f.label :bank_account_number, "Account Number", class: "block text-sm font-medium text-zinc-400 mb-2" %>
                    <%= f.text_field :bank_account_number, class: "block w-full border border-zinc-700 rounded-xl bg-zinc-800/50 py-3 px-4 text-white" %>
                  </div>
                  <div>
                    <%= f.label :bank_sort_code, "Sort Code", class: "block text-sm font-medium text-zinc-400 mb-2" %>
                    <%= f.text_field :bank_sort_code, class: "block w-full border border-zinc-700 rounded-xl bg-zinc-800/50 py-3 px-4 text-white" %>
                  </div>
                  <div>
                    <%= f.label :bank_iban, "IBAN / SWIFT", class: "block text-sm font-medium text-zinc-400 mb-2" %>
                    <%= f.text_field :bank_iban, class: "block w-full border border-zinc-700 rounded-xl bg-zinc-800/50 py-3 px-4 text-white" %>
                  </div>
                </div>
                <div>
                  <%= f.label :bank_reference_hint, "Payment Reference Hint", class: "block text-sm font-medium text-zinc-400 mb-2" %>
                  <%= f.text_field :bank_reference_hint, placeholder: "e.g. Use your order number as the payment reference", class: "block w-full border border-zinc-700 rounded-xl bg-zinc-800/50 py-3 px-4 text-white" %>
                </div>
                <div>
                  <%= f.label :bank_instructions, "Additional Instructions", class: "block text-sm font-medium text-zinc-400 mb-2" %>
                  <%= f.text_area :bank_instructions, rows: 4, class: "block w-full border border-zinc-700 rounded-xl bg-zinc-800/50 py-3 px-4 text-white" %>
                </div>
              </div>

              <button type="submit" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 text-white py-3 px-4 rounded-xl font-semibold inline-flex items-center justify-center gap-2 group transition-all duration-200 shadow-lg shadow-purple-500/20 hover:shadow-purple-500/30 hover:scale-105">
                <i class='bx bx-save text-xl group-hover:scale-110 transition-transform'></i>
                Save Changes
              </button>
            </div>
          <% end %>
        </div>
      </div>

    </div>
  </div>
</div>

<style>
  @keyframes pulse {
    0%, 100% {
      opacity: 0.5;
    }
    50% {
      opacity: 0.1;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const ordersDisabledToggle = document.getElementById('orders_disabled_toggle');
    const ordersDisabledReasonField = document.getElementById('orders_disabled_reason_field');
    
    if (ordersDisabledToggle && ordersDisabledReasonField) {
      // Show/hide reason field based on toggle state
      function toggleReasonField() {
        if (ordersDisabledToggle.checked) {
          ordersDisabledReasonField.classList.remove('hidden');
        } else {
          ordersDisabledReasonField.classList.add('hidden');
        }
      }
      
      // Initial state
      toggleReasonField();
      
      // Listen for changes
      ordersDisabledToggle.addEventListener('change', toggleReasonField);
    }
  });
</script>
